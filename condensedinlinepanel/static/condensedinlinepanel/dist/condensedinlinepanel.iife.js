var X=Object.defineProperty;var V=Object.getOwnPropertySymbols;var Q=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable;var B=(i,o,a)=>o in i?X(i,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[o]=a,K=(i,o)=>{for(var a in o||(o={}))Q.call(o,a)&&B(i,a,o[a]);if(V)for(var a of V(o))Z.call(o,a)&&B(i,a,o[a]);return i};var W=(i,o,a)=>(B(i,typeof o!="symbol"?o+"":o,a),a);var CondensedInlinePanel=function(exports,ReactDOM,React){"use strict";function _interopDefaultLegacy(i){return i&&typeof i=="object"&&"default"in i?i:{default:i}}function _interopNamespace(i){if(i&&i.__esModule)return i;var o=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});return i&&Object.keys(i).forEach(function(a){if(a!=="default"){var s=Object.getOwnPropertyDescriptor(i,a);Object.defineProperty(o,a,s.get?s:{enumerable:!0,get:function(){return i[a]}})}}),o.default=i,Object.freeze(o)}var ReactDOM__namespace=_interopNamespace(ReactDOM),React__default=_interopDefaultLegacy(React),React__namespace=_interopNamespace(React);function formatProdErrorMessage(i){return"Minified Redux error #"+i+"; visit https://redux.js.org/Errors?code="+i+" for the full message or use the non-minified dev environment for full errors. "}var $$observable=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),randomString=function(){return Math.random().toString(36).substring(7).split("").join(".")},ActionTypes={INIT:"@@redux/INIT"+randomString(),REPLACE:"@@redux/REPLACE"+randomString(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+randomString()}};function isPlainObject$1(i){if(typeof i!="object"||i===null)return!1;for(var o=i;Object.getPrototypeOf(o)!==null;)o=Object.getPrototypeOf(o);return Object.getPrototypeOf(i)===o}function createStore(i,o,a){var s;if(typeof o=="function"&&typeof a=="function"||typeof a=="function"&&typeof arguments[3]=="function")throw new Error(formatProdErrorMessage(0));if(typeof o=="function"&&typeof a=="undefined"&&(a=o,o=void 0),typeof a!="undefined"){if(typeof a!="function")throw new Error(formatProdErrorMessage(1));return a(createStore)(i,o)}if(typeof i!="function")throw new Error(formatProdErrorMessage(2));var u=i,_=o,S=[],O=S,D=!1;function T(){O===S&&(O=S.slice())}function E(){if(D)throw new Error(formatProdErrorMessage(3));return _}function P($){if(typeof $!="function")throw new Error(formatProdErrorMessage(4));if(D)throw new Error(formatProdErrorMessage(5));var j=!0;return T(),O.push($),function(){if(!!j){if(D)throw new Error(formatProdErrorMessage(6));j=!1,T();var I=O.indexOf($);O.splice(I,1),S=null}}}function R($){if(!isPlainObject$1($))throw new Error(formatProdErrorMessage(7));if(typeof $.type=="undefined")throw new Error(formatProdErrorMessage(8));if(D)throw new Error(formatProdErrorMessage(9));try{D=!0,_=u(_,$)}finally{D=!1}for(var j=S=O,H=0;H<j.length;H++){var I=j[H];I()}return $}function N($){if(typeof $!="function")throw new Error(formatProdErrorMessage(10));u=$,R({type:ActionTypes.REPLACE})}function M(){var $,j=P;return $={subscribe:function(I){if(typeof I!="object"||I===null)throw new Error(formatProdErrorMessage(11));function C(){I.next&&I.next(E())}C();var L=j(C);return{unsubscribe:L}}},$[$$observable]=function(){return this},$}return R({type:ActionTypes.INIT}),s={dispatch:R,subscribe:P,getState:E,replaceReducer:N},s[$$observable]=M,s}function emptyState(){return{forms:[],emptyForm:{id:0,isEditing:!1,isNew:!1,isDeleted:!1,hasChanged:!1,position:1,fields:{},extra:{},errors:{}}}}function reducer(i=null,o){if(o.type=="SET_STATE")return o.state;if(i==null)return null;let{forms:a,emptyForm:s}=i;if(o.type=="SET_FORM"){let u=a.slice();return u[o.formId]=o.data,{forms:u,emptyForm:s}}if(o.type=="ADD_FORM"){let u=a.slice();return u.push(o.data),{forms:u,emptyForm:s}}if(o.type=="MOVE_FORM"){let u=a.slice(),_=u[o.formId];_.hasChanged=!0;let S=_.position,O=o.position;O>S&&O--,_.position=O;for(let D=0;D<u.length;D++){if(D==o.formId)continue;let T=u[D];T.position>=S&&T.position--,T.position>=O&&T.position++}return{forms:u,emptyForm:s}}return{forms:a,emptyForm:s}}var DndContext=React.createContext({dragDropManager:void 0}),jsxRuntime={exports:{}},reactJsxRuntime_production_min={};/** @license React v16.14.0
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$1=React__default.default,g$1=60103;if(reactJsxRuntime_production_min.Fragment=60107,typeof Symbol=="function"&&Symbol.for){var h$1=Symbol.for;g$1=h$1("react.element"),reactJsxRuntime_production_min.Fragment=h$1("react.fragment")}var m$1=f$1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,n$1=Object.prototype.hasOwnProperty,p$1={key:!0,ref:!0,__self:!0,__source:!0};function q$1(i,o,a){var s,u={},_=null,S=null;a!==void 0&&(_=""+a),o.key!==void 0&&(_=""+o.key),o.ref!==void 0&&(S=o.ref);for(s in o)n$1.call(o,s)&&!p$1.hasOwnProperty(s)&&(u[s]=o[s]);if(i&&i.defaultProps)for(s in o=i.defaultProps,o)u[s]===void 0&&(u[s]=o[s]);return{$$typeof:g$1,type:i,key:_,ref:S,props:u,_owner:m$1.current}}reactJsxRuntime_production_min.jsx=q$1,reactJsxRuntime_production_min.jsxs=q$1,jsxRuntime.exports=reactJsxRuntime_production_min;const jsx=jsxRuntime.exports.jsx,jsxs=jsxRuntime.exports.jsxs;var HandlerRole;(function(i){i.SOURCE="SOURCE",i.TARGET="TARGET"})(HandlerRole||(HandlerRole={}));function invariant$1(i,o){for(var a=arguments.length,s=new Array(a>2?a-2:0),u=2;u<a;u++)s[u-2]=arguments[u];if(!i){var _;if(o===void 0)_=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var S=0;_=new Error(o.replace(/%s/g,function(){return s[S++]})),_.name="Invariant Violation"}throw _.framesToPop=1,_}}var INIT_COORDS="dnd-core/INIT_COORDS",BEGIN_DRAG="dnd-core/BEGIN_DRAG",PUBLISH_DRAG_SOURCE="dnd-core/PUBLISH_DRAG_SOURCE",HOVER="dnd-core/HOVER",DROP="dnd-core/DROP",END_DRAG="dnd-core/END_DRAG";function setClientOffset(i,o){return{type:INIT_COORDS,payload:{sourceClientOffset:o||null,clientOffset:i||null}}}function _typeof$4(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$4=function(a){return typeof a}:_typeof$4=function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof$4(i)}function get(i,o,a){return o.split(".").reduce(function(s,u){return s&&s[u]?s[u]:a||null},i)}function without(i,o){return i.filter(function(a){return a!==o})}function isObject(i){return _typeof$4(i)==="object"}function xor(i,o){var a=new Map,s=function(S){a.set(S,a.has(S)?a.get(S)+1:1)};i.forEach(s),o.forEach(s);var u=[];return a.forEach(function(_,S){_===1&&u.push(S)}),u}function intersection(i,o){return i.filter(function(a){return o.indexOf(a)>-1})}var ResetCoordinatesAction={type:INIT_COORDS,payload:{clientOffset:null,sourceClientOffset:null}};function createBeginDrag(i){return function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{publishSource:!0},u=s.publishSource,_=u===void 0?!0:u,S=s.clientOffset,O=s.getSourceClientOffset,D=i.getMonitor(),T=i.getRegistry();i.dispatch(setClientOffset(S)),verifyInvariants$1(a,D,T);var E=getDraggableSource(a,D);if(E===null){i.dispatch(ResetCoordinatesAction);return}var P=null;if(S){if(!O)throw new Error("getSourceClientOffset must be defined");verifyGetSourceClientOffsetIsFunction(O),P=O(E)}i.dispatch(setClientOffset(S,P));var R=T.getSource(E),N=R.beginDrag(D,E);if(N!=null){verifyItemIsObject(N),T.pinSource(E);var M=T.getSourceType(E);return{type:BEGIN_DRAG,payload:{itemType:M,item:N,sourceId:E,clientOffset:S||null,sourceClientOffset:P||null,isSourcePublic:!!_}}}}}function verifyInvariants$1(i,o,a){invariant$1(!o.isDragging(),"Cannot call beginDrag while dragging."),i.forEach(function(s){invariant$1(a.getSource(s),"Expected sourceIds to be registered.")})}function verifyGetSourceClientOffsetIsFunction(i){invariant$1(typeof i=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function verifyItemIsObject(i){invariant$1(isObject(i),"Item must be an object.")}function getDraggableSource(i,o){for(var a=null,s=i.length-1;s>=0;s--)if(o.canDragSource(i[s])){a=i[s];break}return a}function createPublishDragSource(i){return function(){var a=i.getMonitor();if(a.isDragging())return{type:PUBLISH_DRAG_SOURCE}}}function matchesType(i,o){return o===null?i===null:Array.isArray(i)?i.some(function(a){return a===o}):i===o}function createHover(i){return function(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=s.clientOffset;verifyTargetIdsIsArray(a);var _=a.slice(0),S=i.getMonitor(),O=i.getRegistry();checkInvariants(_,S,O);var D=S.getItemType();return removeNonMatchingTargetIds(_,O,D),hoverAllTargets(_,S,O),{type:HOVER,payload:{targetIds:_,clientOffset:u||null}}}}function verifyTargetIdsIsArray(i){invariant$1(Array.isArray(i),"Expected targetIds to be an array.")}function checkInvariants(i,o,a){invariant$1(o.isDragging(),"Cannot call hover while not dragging."),invariant$1(!o.didDrop(),"Cannot call hover after drop.");for(var s=0;s<i.length;s++){var u=i[s];invariant$1(i.lastIndexOf(u)===s,"Expected targetIds to be unique in the passed array.");var _=a.getTarget(u);invariant$1(_,"Expected targetIds to be registered.")}}function removeNonMatchingTargetIds(i,o,a){for(var s=i.length-1;s>=0;s--){var u=i[s],_=o.getTargetType(u);matchesType(_,a)||i.splice(s,1)}}function hoverAllTargets(i,o,a){i.forEach(function(s){var u=a.getTarget(s);u.hover(o,s)})}function ownKeys$3(i,o){var a=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(u){return Object.getOwnPropertyDescriptor(i,u).enumerable})),a.push.apply(a,s)}return a}function _objectSpread$3(i){for(var o=1;o<arguments.length;o++){var a=arguments[o]!=null?arguments[o]:{};o%2?ownKeys$3(Object(a),!0).forEach(function(s){_defineProperty$g(i,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(a)):ownKeys$3(Object(a)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(a,s))})}return i}function _defineProperty$g(i,o,a){return o in i?Object.defineProperty(i,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[o]=a,i}function createDrop(i){return function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=i.getMonitor(),u=i.getRegistry();verifyInvariants(s);var _=getDroppableTargets(s);_.forEach(function(S,O){var D=determineDropResult(S,O,u,s),T={type:DROP,payload:{dropResult:_objectSpread$3(_objectSpread$3({},a),D)}};i.dispatch(T)})}}function verifyInvariants(i){invariant$1(i.isDragging(),"Cannot call drop while not dragging."),invariant$1(!i.didDrop(),"Cannot call drop twice during one drag operation.")}function determineDropResult(i,o,a,s){var u=a.getTarget(i),_=u?u.drop(s,i):void 0;return verifyDropResultType(_),typeof _=="undefined"&&(_=o===0?{}:s.getDropResult()),_}function verifyDropResultType(i){invariant$1(typeof i=="undefined"||isObject(i),"Drop result must either be an object or undefined.")}function getDroppableTargets(i){var o=i.getTargetIds().filter(i.canDropOnTarget,i);return o.reverse(),o}function createEndDrag(i){return function(){var a=i.getMonitor(),s=i.getRegistry();verifyIsDragging(a);var u=a.getSourceId();if(u!=null){var _=s.getSource(u,!0);_.endDrag(a,u),s.unpinSource()}return{type:END_DRAG}}}function verifyIsDragging(i){invariant$1(i.isDragging(),"Cannot call endDrag while not dragging.")}function createDragDropActions(i){return{beginDrag:createBeginDrag(i),publishDragSource:createPublishDragSource(i),hover:createHover(i),drop:createDrop(i),endDrag:createEndDrag(i)}}function _classCallCheck$c(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function _defineProperties$c(i,o){for(var a=0;a<o.length;a++){var s=o[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function _createClass$c(i,o,a){return o&&_defineProperties$c(i.prototype,o),a&&_defineProperties$c(i,a),i}function _defineProperty$f(i,o,a){return o in i?Object.defineProperty(i,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[o]=a,i}var DragDropManagerImpl=function(){function i(o,a){var s=this;_classCallCheck$c(this,i),_defineProperty$f(this,"store",void 0),_defineProperty$f(this,"monitor",void 0),_defineProperty$f(this,"backend",void 0),_defineProperty$f(this,"isSetUp",!1),_defineProperty$f(this,"handleRefCountChange",function(){var u=s.store.getState().refCount>0;s.backend&&(u&&!s.isSetUp?(s.backend.setup(),s.isSetUp=!0):!u&&s.isSetUp&&(s.backend.teardown(),s.isSetUp=!1))}),this.store=o,this.monitor=a,o.subscribe(this.handleRefCountChange)}return _createClass$c(i,[{key:"receiveBackend",value:function(a){this.backend=a}},{key:"getMonitor",value:function(){return this.monitor}},{key:"getBackend",value:function(){return this.backend}},{key:"getRegistry",value:function(){return this.monitor.registry}},{key:"getActions",value:function(){var a=this,s=this.store.dispatch;function u(S){return function(){for(var O=arguments.length,D=new Array(O),T=0;T<O;T++)D[T]=arguments[T];var E=S.apply(a,D);typeof E!="undefined"&&s(E)}}var _=createDragDropActions(this);return Object.keys(_).reduce(function(S,O){var D=_[O];return S[O]=u(D),S},{})}},{key:"dispatch",value:function(a){this.store.dispatch(a)}}]),i}(),strictEquality=function(o,a){return o===a};function areCoordsEqual(i,o){return!i&&!o?!0:!i||!o?!1:i.x===o.x&&i.y===o.y}function areArraysEqual(i,o){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:strictEquality;if(i.length!==o.length)return!1;for(var s=0;s<i.length;++s)if(!a(i[s],o[s]))return!1;return!0}function ownKeys$2(i,o){var a=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(u){return Object.getOwnPropertyDescriptor(i,u).enumerable})),a.push.apply(a,s)}return a}function _objectSpread$2(i){for(var o=1;o<arguments.length;o++){var a=arguments[o]!=null?arguments[o]:{};o%2?ownKeys$2(Object(a),!0).forEach(function(s){_defineProperty$e(i,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(a)):ownKeys$2(Object(a)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(a,s))})}return i}function _defineProperty$e(i,o,a){return o in i?Object.defineProperty(i,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[o]=a,i}var initialState$1={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function reduce$5(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:initialState$1,o=arguments.length>1?arguments[1]:void 0,a=o.payload;switch(o.type){case INIT_COORDS:case BEGIN_DRAG:return{initialSourceClientOffset:a.sourceClientOffset,initialClientOffset:a.clientOffset,clientOffset:a.clientOffset};case HOVER:return areCoordsEqual(i.clientOffset,a.clientOffset)?i:_objectSpread$2(_objectSpread$2({},i),{},{clientOffset:a.clientOffset});case END_DRAG:case DROP:return initialState$1;default:return i}}var ADD_SOURCE="dnd-core/ADD_SOURCE",ADD_TARGET="dnd-core/ADD_TARGET",REMOVE_SOURCE="dnd-core/REMOVE_SOURCE",REMOVE_TARGET="dnd-core/REMOVE_TARGET";function addSource(i){return{type:ADD_SOURCE,payload:{sourceId:i}}}function addTarget(i){return{type:ADD_TARGET,payload:{targetId:i}}}function removeSource(i){return{type:REMOVE_SOURCE,payload:{sourceId:i}}}function removeTarget(i){return{type:REMOVE_TARGET,payload:{targetId:i}}}function ownKeys$1(i,o){var a=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(u){return Object.getOwnPropertyDescriptor(i,u).enumerable})),a.push.apply(a,s)}return a}function _objectSpread$1(i){for(var o=1;o<arguments.length;o++){var a=arguments[o]!=null?arguments[o]:{};o%2?ownKeys$1(Object(a),!0).forEach(function(s){_defineProperty$d(i,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(a)):ownKeys$1(Object(a)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(a,s))})}return i}function _defineProperty$d(i,o,a){return o in i?Object.defineProperty(i,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[o]=a,i}var initialState={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function reduce$4(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:initialState,o=arguments.length>1?arguments[1]:void 0,a=o.payload;switch(o.type){case BEGIN_DRAG:return _objectSpread$1(_objectSpread$1({},i),{},{itemType:a.itemType,item:a.item,sourceId:a.sourceId,isSourcePublic:a.isSourcePublic,dropResult:null,didDrop:!1});case PUBLISH_DRAG_SOURCE:return _objectSpread$1(_objectSpread$1({},i),{},{isSourcePublic:!0});case HOVER:return _objectSpread$1(_objectSpread$1({},i),{},{targetIds:a.targetIds});case REMOVE_TARGET:return i.targetIds.indexOf(a.targetId)===-1?i:_objectSpread$1(_objectSpread$1({},i),{},{targetIds:without(i.targetIds,a.targetId)});case DROP:return _objectSpread$1(_objectSpread$1({},i),{},{dropResult:a.dropResult,didDrop:!0,targetIds:[]});case END_DRAG:return _objectSpread$1(_objectSpread$1({},i),{},{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return i}}function reduce$3(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,o=arguments.length>1?arguments[1]:void 0;switch(o.type){case ADD_SOURCE:case ADD_TARGET:return i+1;case REMOVE_SOURCE:case REMOVE_TARGET:return i-1;default:return i}}var NONE=[],ALL=[];NONE.__IS_NONE__=!0,ALL.__IS_ALL__=!0;function areDirty(i,o){if(i===NONE)return!1;if(i===ALL||typeof o=="undefined")return!0;var a=intersection(o,i);return a.length>0}function reduce$2(){var i=arguments.length>1?arguments[1]:void 0;switch(i.type){case HOVER:break;case ADD_SOURCE:case ADD_TARGET:case REMOVE_TARGET:case REMOVE_SOURCE:return NONE;case BEGIN_DRAG:case PUBLISH_DRAG_SOURCE:case END_DRAG:case DROP:default:return ALL}var o=i.payload,a=o.targetIds,s=a===void 0?[]:a,u=o.prevTargetIds,_=u===void 0?[]:u,S=xor(s,_),O=S.length>0||!areArraysEqual(s,_);if(!O)return NONE;var D=_[_.length-1],T=s[s.length-1];return D!==T&&(D&&S.push(D),T&&S.push(T)),S}function reduce$1(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return i+1}function ownKeys(i,o){var a=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);o&&(s=s.filter(function(u){return Object.getOwnPropertyDescriptor(i,u).enumerable})),a.push.apply(a,s)}return a}function _objectSpread(i){for(var o=1;o<arguments.length;o++){var a=arguments[o]!=null?arguments[o]:{};o%2?ownKeys(Object(a),!0).forEach(function(s){_defineProperty$c(i,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(a)):ownKeys(Object(a)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(a,s))})}return i}function _defineProperty$c(i,o,a){return o in i?Object.defineProperty(i,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[o]=a,i}function reduce(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;return{dirtyHandlerIds:reduce$2(i.dirtyHandlerIds,{type:o.type,payload:_objectSpread(_objectSpread({},o.payload),{},{prevTargetIds:get(i,"dragOperation.targetIds",[])})}),dragOffset:reduce$5(i.dragOffset,o),refCount:reduce$3(i.refCount,o),dragOperation:reduce$4(i.dragOperation,o),stateId:reduce$1(i.stateId)}}function add(i,o){return{x:i.x+o.x,y:i.y+o.y}}function subtract(i,o){return{x:i.x-o.x,y:i.y-o.y}}function getSourceClientOffset(i){var o=i.clientOffset,a=i.initialClientOffset,s=i.initialSourceClientOffset;return!o||!a||!s?null:subtract(add(o,s),a)}function getDifferenceFromInitialOffset(i){var o=i.clientOffset,a=i.initialClientOffset;return!o||!a?null:subtract(o,a)}function _classCallCheck$b(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function _defineProperties$b(i,o){for(var a=0;a<o.length;a++){var s=o[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function _createClass$b(i,o,a){return o&&_defineProperties$b(i.prototype,o),a&&_defineProperties$b(i,a),i}function _defineProperty$b(i,o,a){return o in i?Object.defineProperty(i,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[o]=a,i}var DragDropMonitorImpl=function(){function i(o,a){_classCallCheck$b(this,i),_defineProperty$b(this,"store",void 0),_defineProperty$b(this,"registry",void 0),this.store=o,this.registry=a}return _createClass$b(i,[{key:"subscribeToStateChange",value:function(a){var s=this,u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{handlerIds:void 0},_=u.handlerIds;invariant$1(typeof a=="function","listener must be a function."),invariant$1(typeof _=="undefined"||Array.isArray(_),"handlerIds, when specified, must be an array of strings.");var S=this.store.getState().stateId,O=function(){var T=s.store.getState(),E=T.stateId;try{var P=E===S||E===S+1&&!areDirty(T.dirtyHandlerIds,_);P||a()}finally{S=E}};return this.store.subscribe(O)}},{key:"subscribeToOffsetChange",value:function(a){var s=this;invariant$1(typeof a=="function","listener must be a function.");var u=this.store.getState().dragOffset,_=function(){var O=s.store.getState().dragOffset;O!==u&&(u=O,a())};return this.store.subscribe(_)}},{key:"canDragSource",value:function(a){if(!a)return!1;var s=this.registry.getSource(a);return invariant$1(s,"Expected to find a valid source. sourceId=".concat(a)),this.isDragging()?!1:s.canDrag(this,a)}},{key:"canDropOnTarget",value:function(a){if(!a)return!1;var s=this.registry.getTarget(a);if(invariant$1(s,"Expected to find a valid target. targetId=".concat(a)),!this.isDragging()||this.didDrop())return!1;var u=this.registry.getTargetType(a),_=this.getItemType();return matchesType(u,_)&&s.canDrop(this,a)}},{key:"isDragging",value:function(){return Boolean(this.getItemType())}},{key:"isDraggingSource",value:function(a){if(!a)return!1;var s=this.registry.getSource(a,!0);if(invariant$1(s,"Expected to find a valid source. sourceId=".concat(a)),!this.isDragging()||!this.isSourcePublic())return!1;var u=this.registry.getSourceType(a),_=this.getItemType();return u!==_?!1:s.isDragging(this,a)}},{key:"isOverTarget",value:function(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shallow:!1};if(!a)return!1;var u=s.shallow;if(!this.isDragging())return!1;var _=this.registry.getTargetType(a),S=this.getItemType();if(S&&!matchesType(_,S))return!1;var O=this.getTargetIds();if(!O.length)return!1;var D=O.indexOf(a);return u?D===O.length-1:D>-1}},{key:"getItemType",value:function(){return this.store.getState().dragOperation.itemType}},{key:"getItem",value:function(){return this.store.getState().dragOperation.item}},{key:"getSourceId",value:function(){return this.store.getState().dragOperation.sourceId}},{key:"getTargetIds",value:function(){return this.store.getState().dragOperation.targetIds}},{key:"getDropResult",value:function(){return this.store.getState().dragOperation.dropResult}},{key:"didDrop",value:function(){return this.store.getState().dragOperation.didDrop}},{key:"isSourcePublic",value:function(){return Boolean(this.store.getState().dragOperation.isSourcePublic)}},{key:"getInitialClientOffset",value:function(){return this.store.getState().dragOffset.initialClientOffset}},{key:"getInitialSourceClientOffset",value:function(){return this.store.getState().dragOffset.initialSourceClientOffset}},{key:"getClientOffset",value:function(){return this.store.getState().dragOffset.clientOffset}},{key:"getSourceClientOffset",value:function(){return getSourceClientOffset(this.store.getState().dragOffset)}},{key:"getDifferenceFromInitialOffset",value:function(){return getDifferenceFromInitialOffset(this.store.getState().dragOffset)}}]),i}(),nextUniqueId=0;function getNextUniqueId(){return nextUniqueId++}function _typeof$3(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$3=function(a){return typeof a}:_typeof$3=function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof$3(i)}function validateSourceContract(i){invariant$1(typeof i.canDrag=="function","Expected canDrag to be a function."),invariant$1(typeof i.beginDrag=="function","Expected beginDrag to be a function."),invariant$1(typeof i.endDrag=="function","Expected endDrag to be a function.")}function validateTargetContract(i){invariant$1(typeof i.canDrop=="function","Expected canDrop to be a function."),invariant$1(typeof i.hover=="function","Expected hover to be a function."),invariant$1(typeof i.drop=="function","Expected beginDrag to be a function.")}function validateType(i,o){if(o&&Array.isArray(i)){i.forEach(function(a){return validateType(a,!1)});return}invariant$1(typeof i=="string"||_typeof$3(i)==="symbol",o?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}function rawAsap(i){queue.length||requestFlush(),queue[queue.length]=i}var queue=[],requestFlush,index=0,capacity=1024;function flush(){for(;index<queue.length;){var i=index;if(index=index+1,queue[i].call(),index>capacity){for(var o=0,a=queue.length-index;o<a;o++)queue[o]=queue[o+index];queue.length-=index,index=0}}queue.length=0,index=0}var scope=typeof global!="undefined"?global:self,BrowserMutationObserver=scope.MutationObserver||scope.WebKitMutationObserver;typeof BrowserMutationObserver=="function"?requestFlush=makeRequestCallFromMutationObserver(flush):requestFlush=makeRequestCallFromTimer(flush),rawAsap.requestFlush=requestFlush;function makeRequestCallFromMutationObserver(i){var o=1,a=new BrowserMutationObserver(i),s=document.createTextNode("");return a.observe(s,{characterData:!0}),function(){o=-o,s.data=o}}function makeRequestCallFromTimer(i){return function(){var a=setTimeout(u,0),s=setInterval(u,50);function u(){clearTimeout(a),clearInterval(s),i()}}}rawAsap.makeRequestCallFromTimer=makeRequestCallFromTimer;var freeTasks=[],pendingErrors=[],requestErrorThrow=rawAsap.makeRequestCallFromTimer(throwFirstError);function throwFirstError(){if(pendingErrors.length)throw pendingErrors.shift()}function asap(i){var o;freeTasks.length?o=freeTasks.pop():o=new RawTask,o.task=i,rawAsap(o)}var RawTask=function(){function i(){}return i.prototype.call=function(){try{this.task.call()}catch(o){asap.onerror?asap.onerror(o):(pendingErrors.push(o),requestErrorThrow())}finally{this.task=null,freeTasks[freeTasks.length]=this}},i}();function _classCallCheck$a(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function _defineProperties$a(i,o){for(var a=0;a<o.length;a++){var s=o[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function _createClass$a(i,o,a){return o&&_defineProperties$a(i.prototype,o),a&&_defineProperties$a(i,a),i}function _defineProperty$a(i,o,a){return o in i?Object.defineProperty(i,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[o]=a,i}function _slicedToArray$2(i,o){return _arrayWithHoles$2(i)||_iterableToArrayLimit$2(i,o)||_unsupportedIterableToArray$2(i,o)||_nonIterableRest$2()}function _nonIterableRest$2(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$2(i,o){if(!!i){if(typeof i=="string")return _arrayLikeToArray$2(i,o);var a=Object.prototype.toString.call(i).slice(8,-1);if(a==="Object"&&i.constructor&&(a=i.constructor.name),a==="Map"||a==="Set")return Array.from(i);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return _arrayLikeToArray$2(i,o)}}function _arrayLikeToArray$2(i,o){(o==null||o>i.length)&&(o=i.length);for(var a=0,s=new Array(o);a<o;a++)s[a]=i[a];return s}function _iterableToArrayLimit$2(i,o){var a=i==null?null:typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(a!=null){var s=[],u=!0,_=!1,S,O;try{for(a=a.call(i);!(u=(S=a.next()).done)&&(s.push(S.value),!(o&&s.length===o));u=!0);}catch(D){_=!0,O=D}finally{try{!u&&a.return!=null&&a.return()}finally{if(_)throw O}}return s}}function _arrayWithHoles$2(i){if(Array.isArray(i))return i}function getNextHandlerId(i){var o=getNextUniqueId().toString();switch(i){case HandlerRole.SOURCE:return"S".concat(o);case HandlerRole.TARGET:return"T".concat(o);default:throw new Error("Unknown Handler Role: ".concat(i))}}function parseRoleFromHandlerId(i){switch(i[0]){case"S":return HandlerRole.SOURCE;case"T":return HandlerRole.TARGET;default:invariant$1(!1,"Cannot parse handler ID: ".concat(i))}}function mapContainsValue(i,o){var a=i.entries(),s=!1;do{var u=a.next(),_=u.done,S=_slicedToArray$2(u.value,2),O=S[1];if(O===o)return!0;s=!!_}while(!s);return!1}var HandlerRegistryImpl=function(){function i(o){_classCallCheck$a(this,i),_defineProperty$a(this,"types",new Map),_defineProperty$a(this,"dragSources",new Map),_defineProperty$a(this,"dropTargets",new Map),_defineProperty$a(this,"pinnedSourceId",null),_defineProperty$a(this,"pinnedSource",null),_defineProperty$a(this,"store",void 0),this.store=o}return _createClass$a(i,[{key:"addSource",value:function(a,s){validateType(a),validateSourceContract(s);var u=this.addHandler(HandlerRole.SOURCE,a,s);return this.store.dispatch(addSource(u)),u}},{key:"addTarget",value:function(a,s){validateType(a,!0),validateTargetContract(s);var u=this.addHandler(HandlerRole.TARGET,a,s);return this.store.dispatch(addTarget(u)),u}},{key:"containsHandler",value:function(a){return mapContainsValue(this.dragSources,a)||mapContainsValue(this.dropTargets,a)}},{key:"getSource",value:function(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;invariant$1(this.isSourceId(a),"Expected a valid source ID.");var u=s&&a===this.pinnedSourceId,_=u?this.pinnedSource:this.dragSources.get(a);return _}},{key:"getTarget",value:function(a){return invariant$1(this.isTargetId(a),"Expected a valid target ID."),this.dropTargets.get(a)}},{key:"getSourceType",value:function(a){return invariant$1(this.isSourceId(a),"Expected a valid source ID."),this.types.get(a)}},{key:"getTargetType",value:function(a){return invariant$1(this.isTargetId(a),"Expected a valid target ID."),this.types.get(a)}},{key:"isSourceId",value:function(a){var s=parseRoleFromHandlerId(a);return s===HandlerRole.SOURCE}},{key:"isTargetId",value:function(a){var s=parseRoleFromHandlerId(a);return s===HandlerRole.TARGET}},{key:"removeSource",value:function(a){var s=this;invariant$1(this.getSource(a),"Expected an existing source."),this.store.dispatch(removeSource(a)),asap(function(){s.dragSources.delete(a),s.types.delete(a)})}},{key:"removeTarget",value:function(a){invariant$1(this.getTarget(a),"Expected an existing target."),this.store.dispatch(removeTarget(a)),this.dropTargets.delete(a),this.types.delete(a)}},{key:"pinSource",value:function(a){var s=this.getSource(a);invariant$1(s,"Expected an existing source."),this.pinnedSourceId=a,this.pinnedSource=s}},{key:"unpinSource",value:function(){invariant$1(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}},{key:"addHandler",value:function(a,s,u){var _=getNextHandlerId(a);return this.types.set(_,s),a===HandlerRole.SOURCE?this.dragSources.set(_,u):a===HandlerRole.TARGET&&this.dropTargets.set(_,u),_}}]),i}();function createDragDropManager(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,u=makeStoreInstance(s),_=new DragDropMonitorImpl(u,new HandlerRegistryImpl(u)),S=new DragDropManagerImpl(u,_),O=i(S,o,a);return S.receiveBackend(O),S}function makeStoreInstance(i){var o=typeof window!="undefined"&&window.__REDUX_DEVTOOLS_EXTENSION__;return createStore(reduce,i&&o&&o({name:"dnd-core",instanceId:"dnd-core"}))}var _excluded=["children"];function _slicedToArray$1(i,o){return _arrayWithHoles$1(i)||_iterableToArrayLimit$1(i,o)||_unsupportedIterableToArray$1(i,o)||_nonIterableRest$1()}function _nonIterableRest$1(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$1(i,o){if(!!i){if(typeof i=="string")return _arrayLikeToArray$1(i,o);var a=Object.prototype.toString.call(i).slice(8,-1);if(a==="Object"&&i.constructor&&(a=i.constructor.name),a==="Map"||a==="Set")return Array.from(i);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return _arrayLikeToArray$1(i,o)}}function _arrayLikeToArray$1(i,o){(o==null||o>i.length)&&(o=i.length);for(var a=0,s=new Array(o);a<o;a++)s[a]=i[a];return s}function _iterableToArrayLimit$1(i,o){var a=i==null?null:typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(a!=null){var s=[],u=!0,_=!1,S,O;try{for(a=a.call(i);!(u=(S=a.next()).done)&&(s.push(S.value),!(o&&s.length===o));u=!0);}catch(D){_=!0,O=D}finally{try{!u&&a.return!=null&&a.return()}finally{if(_)throw O}}return s}}function _arrayWithHoles$1(i){if(Array.isArray(i))return i}function _objectWithoutProperties(i,o){if(i==null)return{};var a=_objectWithoutPropertiesLoose(i,o),s,u;if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(i);for(u=0;u<_.length;u++)s=_[u],!(o.indexOf(s)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,s)||(a[s]=i[s]))}return a}function _objectWithoutPropertiesLoose(i,o){if(i==null)return{};var a={},s=Object.keys(i),u,_;for(_=0;_<s.length;_++)u=s[_],!(o.indexOf(u)>=0)&&(a[u]=i[u]);return a}var refCount=0,INSTANCE_SYM=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__"),DndProvider=React.memo(function(o){var a=o.children,s=_objectWithoutProperties(o,_excluded),u=getDndContextValue(s),_=_slicedToArray$1(u,2),S=_[0],O=_[1];return React.useEffect(function(){if(O){var D=getGlobalContext();return++refCount,function(){--refCount===0&&(D[INSTANCE_SYM]=null)}}},[]),jsx(DndContext.Provider,Object.assign({value:S},{children:a}),void 0)});function getDndContextValue(i){if("manager"in i){var o={dragDropManager:i.manager};return[o,!1]}var a=createSingletonDndContext(i.backend,i.context,i.options,i.debugMode),s=!i.context;return[a,s]}function createSingletonDndContext(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:getGlobalContext(),a=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,u=o;return u[INSTANCE_SYM]||(u[INSTANCE_SYM]={dragDropManager:createDragDropManager(i,o,a,s)}),u[INSTANCE_SYM]}function getGlobalContext(){return typeof global!="undefined"?global:window}function _classCallCheck$9(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function _defineProperties$9(i,o){for(var a=0;a<o.length;a++){var s=o[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function _createClass$9(i,o,a){return o&&_defineProperties$9(i.prototype,o),a&&_defineProperties$9(i,a),i}function _defineProperty$9(i,o,a){return o in i?Object.defineProperty(i,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[o]=a,i}var isCallingCanDrag=!1,isCallingIsDragging=!1,DragSourceMonitorImpl=function(){function i(o){_classCallCheck$9(this,i),_defineProperty$9(this,"internalMonitor",void 0),_defineProperty$9(this,"sourceId",null),this.internalMonitor=o.getMonitor()}return _createClass$9(i,[{key:"receiveHandlerId",value:function(a){this.sourceId=a}},{key:"getHandlerId",value:function(){return this.sourceId}},{key:"canDrag",value:function(){invariant$1(!isCallingCanDrag,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return isCallingCanDrag=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{isCallingCanDrag=!1}}},{key:"isDragging",value:function(){if(!this.sourceId)return!1;invariant$1(!isCallingIsDragging,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return isCallingIsDragging=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{isCallingIsDragging=!1}}},{key:"subscribeToStateChange",value:function(a,s){return this.internalMonitor.subscribeToStateChange(a,s)}},{key:"isDraggingSource",value:function(a){return this.internalMonitor.isDraggingSource(a)}},{key:"isOverTarget",value:function(a,s){return this.internalMonitor.isOverTarget(a,s)}},{key:"getTargetIds",value:function(){return this.internalMonitor.getTargetIds()}},{key:"isSourcePublic",value:function(){return this.internalMonitor.isSourcePublic()}},{key:"getSourceId",value:function(){return this.internalMonitor.getSourceId()}},{key:"subscribeToOffsetChange",value:function(a){return this.internalMonitor.subscribeToOffsetChange(a)}},{key:"canDragSource",value:function(a){return this.internalMonitor.canDragSource(a)}},{key:"canDropOnTarget",value:function(a){return this.internalMonitor.canDropOnTarget(a)}},{key:"getItemType",value:function(){return this.internalMonitor.getItemType()}},{key:"getItem",value:function(){return this.internalMonitor.getItem()}},{key:"getDropResult",value:function(){return this.internalMonitor.getDropResult()}},{key:"didDrop",value:function(){return this.internalMonitor.didDrop()}},{key:"getInitialClientOffset",value:function(){return this.internalMonitor.getInitialClientOffset()}},{key:"getInitialSourceClientOffset",value:function(){return this.internalMonitor.getInitialSourceClientOffset()}},{key:"getSourceClientOffset",value:function(){return this.internalMonitor.getSourceClientOffset()}},{key:"getClientOffset",value:function(){return this.internalMonitor.getClientOffset()}},{key:"getDifferenceFromInitialOffset",value:function(){return this.internalMonitor.getDifferenceFromInitialOffset()}}]),i}();function _classCallCheck$8(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function _defineProperties$8(i,o){for(var a=0;a<o.length;a++){var s=o[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function _createClass$8(i,o,a){return o&&_defineProperties$8(i.prototype,o),a&&_defineProperties$8(i,a),i}function _defineProperty$8(i,o,a){return o in i?Object.defineProperty(i,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[o]=a,i}var isCallingCanDrop=!1,DropTargetMonitorImpl=function(){function i(o){_classCallCheck$8(this,i),_defineProperty$8(this,"internalMonitor",void 0),_defineProperty$8(this,"targetId",null),this.internalMonitor=o.getMonitor()}return _createClass$8(i,[{key:"receiveHandlerId",value:function(a){this.targetId=a}},{key:"getHandlerId",value:function(){return this.targetId}},{key:"subscribeToStateChange",value:function(a,s){return this.internalMonitor.subscribeToStateChange(a,s)}},{key:"canDrop",value:function(){if(!this.targetId)return!1;invariant$1(!isCallingCanDrop,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return isCallingCanDrop=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{isCallingCanDrop=!1}}},{key:"isOver",value:function(a){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,a):!1}},{key:"getItemType",value:function(){return this.internalMonitor.getItemType()}},{key:"getItem",value:function(){return this.internalMonitor.getItem()}},{key:"getDropResult",value:function(){return this.internalMonitor.getDropResult()}},{key:"didDrop",value:function(){return this.internalMonitor.didDrop()}},{key:"getInitialClientOffset",value:function(){return this.internalMonitor.getInitialClientOffset()}},{key:"getInitialSourceClientOffset",value:function(){return this.internalMonitor.getInitialSourceClientOffset()}},{key:"getSourceClientOffset",value:function(){return this.internalMonitor.getSourceClientOffset()}},{key:"getClientOffset",value:function(){return this.internalMonitor.getClientOffset()}},{key:"getDifferenceFromInitialOffset",value:function(){return this.internalMonitor.getDifferenceFromInitialOffset()}}]),i}();function throwIfCompositeComponentElement(i){if(typeof i.type!="string"){var o=i.type.displayName||i.type.name||"the component";throw new Error("Only native element nodes can now be passed to React DnD connectors."+"You can either wrap ".concat(o," into a <div>, or turn it into a ")+"drag source or a drop target itself.")}}function wrapHookToRecognizeElement(i){return function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!React.isValidElement(o)){var s=o;return i(s,a),s}var u=o;throwIfCompositeComponentElement(u);var _=a?function(S){return i(S,a)}:i;return cloneWithRef(u,_)}}function wrapConnectorHooks(i){var o={};return Object.keys(i).forEach(function(a){var s=i[a];if(a.endsWith("Ref"))o[a]=i[a];else{var u=wrapHookToRecognizeElement(s);o[a]=function(){return u}}}),o}function setRef(i,o){typeof i=="function"?i(o):i.current=o}function cloneWithRef(i,o){var a=i.ref;return invariant$1(typeof a!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),a?React.cloneElement(i,{ref:function(u){setRef(a,u),setRef(o,u)}}):React.cloneElement(i,{ref:o})}function _typeof$2(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$2=function(a){return typeof a}:_typeof$2=function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof$2(i)}function isRef(i){return i!==null&&_typeof$2(i)==="object"&&Object.prototype.hasOwnProperty.call(i,"current")}function shallowEqual(i,o,a,s){var u=a?a.call(s,i,o):void 0;if(u!==void 0)return!!u;if(i===o)return!0;if(typeof i!="object"||!i||typeof o!="object"||!o)return!1;var _=Object.keys(i),S=Object.keys(o);if(_.length!==S.length)return!1;for(var O=Object.prototype.hasOwnProperty.bind(o),D=0;D<_.length;D++){var T=_[D];if(!O(T))return!1;var E=i[T],P=o[T];if(u=a?a.call(s,E,P,T):void 0,u===!1||u===void 0&&E!==P)return!1}return!0}function _classCallCheck$7(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function _defineProperties$7(i,o){for(var a=0;a<o.length;a++){var s=o[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function _createClass$7(i,o,a){return o&&_defineProperties$7(i.prototype,o),a&&_defineProperties$7(i,a),i}function _defineProperty$7(i,o,a){return o in i?Object.defineProperty(i,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[o]=a,i}var SourceConnector=function(){function i(o){var a=this;_classCallCheck$7(this,i),_defineProperty$7(this,"hooks",wrapConnectorHooks({dragSource:function(u,_){a.clearDragSource(),a.dragSourceOptions=_||null,isRef(u)?a.dragSourceRef=u:a.dragSourceNode=u,a.reconnectDragSource()},dragPreview:function(u,_){a.clearDragPreview(),a.dragPreviewOptions=_||null,isRef(u)?a.dragPreviewRef=u:a.dragPreviewNode=u,a.reconnectDragPreview()}})),_defineProperty$7(this,"handlerId",null),_defineProperty$7(this,"dragSourceRef",null),_defineProperty$7(this,"dragSourceNode",void 0),_defineProperty$7(this,"dragSourceOptionsInternal",null),_defineProperty$7(this,"dragSourceUnsubscribe",void 0),_defineProperty$7(this,"dragPreviewRef",null),_defineProperty$7(this,"dragPreviewNode",void 0),_defineProperty$7(this,"dragPreviewOptionsInternal",null),_defineProperty$7(this,"dragPreviewUnsubscribe",void 0),_defineProperty$7(this,"lastConnectedHandlerId",null),_defineProperty$7(this,"lastConnectedDragSource",null),_defineProperty$7(this,"lastConnectedDragSourceOptions",null),_defineProperty$7(this,"lastConnectedDragPreview",null),_defineProperty$7(this,"lastConnectedDragPreviewOptions",null),_defineProperty$7(this,"backend",void 0),this.backend=o}return _createClass$7(i,[{key:"receiveHandlerId",value:function(a){this.handlerId!==a&&(this.handlerId=a,this.reconnect())}},{key:"connectTarget",get:function(){return this.dragSource}},{key:"dragSourceOptions",get:function(){return this.dragSourceOptionsInternal},set:function(a){this.dragSourceOptionsInternal=a}},{key:"dragPreviewOptions",get:function(){return this.dragPreviewOptionsInternal},set:function(a){this.dragPreviewOptionsInternal=a}},{key:"reconnect",value:function(){this.reconnectDragSource(),this.reconnectDragPreview()}},{key:"reconnectDragSource",value:function(){var a=this.dragSource,s=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();if(s&&this.disconnectDragSource(),!!this.handlerId){if(!a){this.lastConnectedDragSource=a;return}s&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=a,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,a,this.dragSourceOptions))}}},{key:"reconnectDragPreview",value:function(){var a=this.dragPreview,s=this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(s&&this.disconnectDragPreview(),!!this.handlerId){if(!a){this.lastConnectedDragPreview=a;return}s&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=a,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,a,this.dragPreviewOptions))}}},{key:"didHandlerIdChange",value:function(){return this.lastConnectedHandlerId!==this.handlerId}},{key:"didConnectedDragSourceChange",value:function(){return this.lastConnectedDragSource!==this.dragSource}},{key:"didConnectedDragPreviewChange",value:function(){return this.lastConnectedDragPreview!==this.dragPreview}},{key:"didDragSourceOptionsChange",value:function(){return!shallowEqual(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}},{key:"didDragPreviewOptionsChange",value:function(){return!shallowEqual(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}},{key:"disconnectDragSource",value:function(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}},{key:"disconnectDragPreview",value:function(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}},{key:"dragSource",get:function(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}},{key:"dragPreview",get:function(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}},{key:"clearDragSource",value:function(){this.dragSourceNode=null,this.dragSourceRef=null}},{key:"clearDragPreview",value:function(){this.dragPreviewNode=null,this.dragPreviewRef=null}}]),i}();function _classCallCheck$6(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function _defineProperties$6(i,o){for(var a=0;a<o.length;a++){var s=o[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function _createClass$6(i,o,a){return o&&_defineProperties$6(i.prototype,o),a&&_defineProperties$6(i,a),i}function _defineProperty$6(i,o,a){return o in i?Object.defineProperty(i,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[o]=a,i}var TargetConnector=function(){function i(o){var a=this;_classCallCheck$6(this,i),_defineProperty$6(this,"hooks",wrapConnectorHooks({dropTarget:function(u,_){a.clearDropTarget(),a.dropTargetOptions=_,isRef(u)?a.dropTargetRef=u:a.dropTargetNode=u,a.reconnect()}})),_defineProperty$6(this,"handlerId",null),_defineProperty$6(this,"dropTargetRef",null),_defineProperty$6(this,"dropTargetNode",void 0),_defineProperty$6(this,"dropTargetOptionsInternal",null),_defineProperty$6(this,"unsubscribeDropTarget",void 0),_defineProperty$6(this,"lastConnectedHandlerId",null),_defineProperty$6(this,"lastConnectedDropTarget",null),_defineProperty$6(this,"lastConnectedDropTargetOptions",null),_defineProperty$6(this,"backend",void 0),this.backend=o}return _createClass$6(i,[{key:"connectTarget",get:function(){return this.dropTarget}},{key:"reconnect",value:function(){var a=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();a&&this.disconnectDropTarget();var s=this.dropTarget;if(!!this.handlerId){if(!s){this.lastConnectedDropTarget=s;return}a&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=s,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,s,this.dropTargetOptions))}}},{key:"receiveHandlerId",value:function(a){a!==this.handlerId&&(this.handlerId=a,this.reconnect())}},{key:"dropTargetOptions",get:function(){return this.dropTargetOptionsInternal},set:function(a){this.dropTargetOptionsInternal=a}},{key:"didHandlerIdChange",value:function(){return this.lastConnectedHandlerId!==this.handlerId}},{key:"didDropTargetChange",value:function(){return this.lastConnectedDropTarget!==this.dropTarget}},{key:"didOptionsChange",value:function(){return!shallowEqual(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}},{key:"disconnectDropTarget",value:function(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}},{key:"dropTarget",get:function(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}},{key:"clearDropTarget",value:function(){this.dropTargetRef=null,this.dropTargetNode=null}}]),i}();function registerTarget(i,o,a){var s=a.getRegistry(),u=s.addTarget(i,o);return[u,function(){return s.removeTarget(u)}]}function registerSource(i,o,a){var s=a.getRegistry(),u=s.addSource(i,o);return[u,function(){return s.removeSource(u)}]}function _typeof$1(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$1=function(a){return typeof a}:_typeof$1=function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof$1(i)}function getDecoratedComponent(i){var o=i.current;return o==null?null:o.decoratedRef?o.decoratedRef.current:o}function isClassComponent(i){return i&&i.prototype&&typeof i.prototype.render=="function"}function isRefForwardingComponent(i){var o,a=i;return(a==null||(o=a.$$typeof)===null||o===void 0?void 0:o.toString())==="Symbol(react.forward_ref)"}function isRefable(i){return isClassComponent(i)||isRefForwardingComponent(i)}function isFunction(i){return typeof i=="function"}function noop(){}function isObjectLike(i){return _typeof$1(i)==="object"&&i!==null}function isPlainObject(i){if(!isObjectLike(i))return!1;if(Object.getPrototypeOf(i)===null)return!0;for(var o=i;Object.getPrototypeOf(o)!==null;)o=Object.getPrototypeOf(o);return Object.getPrototypeOf(i)===o}function isValidType(i,o){return typeof i=="string"||_typeof$1(i)==="symbol"||!!o&&Array.isArray(i)&&i.every(function(a){return isValidType(a,!1)})}function _classCallCheck$5(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function _defineProperties$5(i,o){for(var a=0;a<o.length;a++){var s=o[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function _createClass$5(i,o,a){return o&&_defineProperties$5(i.prototype,o),a&&_defineProperties$5(i,a),i}function _defineProperty$5(i,o,a){return o in i?Object.defineProperty(i,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[o]=a,i}var Disposable=function(){function i(o){_classCallCheck$5(this,i),_defineProperty$5(this,"isDisposed",!1),_defineProperty$5(this,"action",void 0),this.action=isFunction(o)?o:noop}return _createClass$5(i,[{key:"dispose",value:function(){this.isDisposed||(this.action(),this.isDisposed=!0)}}],[{key:"isDisposable",value:function(a){return Boolean(a&&isFunction(a.dispose))}},{key:"_fixup",value:function(a){return i.isDisposable(a)?a:i.empty}},{key:"create",value:function(a){return new i(a)}}]),i}();_defineProperty$5(Disposable,"empty",{dispose:noop});var CompositeDisposable=function(){function i(){_classCallCheck$5(this,i),_defineProperty$5(this,"isDisposed",!1),_defineProperty$5(this,"disposables",void 0);for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];this.disposables=a}return _createClass$5(i,[{key:"add",value:function(a){this.isDisposed?a.dispose():this.disposables.push(a)}},{key:"remove",value:function(a){var s=!1;if(!this.isDisposed){var u=this.disposables.indexOf(a);u!==-1&&(s=!0,this.disposables.splice(u,1),a.dispose())}return s}},{key:"clear",value:function(){if(!this.isDisposed){for(var a=this.disposables.length,s=new Array(a),u=0;u<a;u++)s[u]=this.disposables[u];this.disposables=[];for(var _=0;_<a;_++)s[_].dispose()}}},{key:"dispose",value:function(){if(!this.isDisposed){this.isDisposed=!0;for(var a=this.disposables.length,s=new Array(a),u=0;u<a;u++)s[u]=this.disposables[u];this.disposables=[];for(var _=0;_<a;_++)s[_].dispose()}}}]),i}(),SerialDisposable=function(){function i(){_classCallCheck$5(this,i),_defineProperty$5(this,"isDisposed",!1),_defineProperty$5(this,"current",void 0)}return _createClass$5(i,[{key:"getDisposable",value:function(){return this.current}},{key:"setDisposable",value:function(a){var s=this.isDisposed;if(!s){var u=this.current;this.current=a,u&&u.dispose()}s&&a&&a.dispose()}},{key:"dispose",value:function(){if(!this.isDisposed){this.isDisposed=!0;var a=this.current;this.current=void 0,a&&a.dispose()}}}]),i}(),reactIs$1={exports:{}},reactIs_production_min={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b=typeof Symbol=="function"&&Symbol.for,c=b?Symbol.for("react.element"):60103,d=b?Symbol.for("react.portal"):60106,e=b?Symbol.for("react.fragment"):60107,f=b?Symbol.for("react.strict_mode"):60108,g=b?Symbol.for("react.profiler"):60114,h=b?Symbol.for("react.provider"):60109,k=b?Symbol.for("react.context"):60110,l=b?Symbol.for("react.async_mode"):60111,m=b?Symbol.for("react.concurrent_mode"):60111,n=b?Symbol.for("react.forward_ref"):60112,p=b?Symbol.for("react.suspense"):60113,q=b?Symbol.for("react.suspense_list"):60120,r=b?Symbol.for("react.memo"):60115,t=b?Symbol.for("react.lazy"):60116,v=b?Symbol.for("react.block"):60121,w=b?Symbol.for("react.fundamental"):60117,x=b?Symbol.for("react.responder"):60118,y=b?Symbol.for("react.scope"):60119;function z(i){if(typeof i=="object"&&i!==null){var o=i.$$typeof;switch(o){case c:switch(i=i.type,i){case l:case m:case e:case g:case f:case p:return i;default:switch(i=i&&i.$$typeof,i){case k:case n:case t:case r:case h:return i;default:return o}}case d:return o}}}function A(i){return z(i)===m}reactIs_production_min.AsyncMode=l,reactIs_production_min.ConcurrentMode=m,reactIs_production_min.ContextConsumer=k,reactIs_production_min.ContextProvider=h,reactIs_production_min.Element=c,reactIs_production_min.ForwardRef=n,reactIs_production_min.Fragment=e,reactIs_production_min.Lazy=t,reactIs_production_min.Memo=r,reactIs_production_min.Portal=d,reactIs_production_min.Profiler=g,reactIs_production_min.StrictMode=f,reactIs_production_min.Suspense=p,reactIs_production_min.isAsyncMode=function(i){return A(i)||z(i)===l},reactIs_production_min.isConcurrentMode=A,reactIs_production_min.isContextConsumer=function(i){return z(i)===k},reactIs_production_min.isContextProvider=function(i){return z(i)===h},reactIs_production_min.isElement=function(i){return typeof i=="object"&&i!==null&&i.$$typeof===c},reactIs_production_min.isForwardRef=function(i){return z(i)===n},reactIs_production_min.isFragment=function(i){return z(i)===e},reactIs_production_min.isLazy=function(i){return z(i)===t},reactIs_production_min.isMemo=function(i){return z(i)===r},reactIs_production_min.isPortal=function(i){return z(i)===d},reactIs_production_min.isProfiler=function(i){return z(i)===g},reactIs_production_min.isStrictMode=function(i){return z(i)===f},reactIs_production_min.isSuspense=function(i){return z(i)===p},reactIs_production_min.isValidElementType=function(i){return typeof i=="string"||typeof i=="function"||i===e||i===m||i===g||i===f||i===p||i===q||typeof i=="object"&&i!==null&&(i.$$typeof===t||i.$$typeof===r||i.$$typeof===h||i.$$typeof===k||i.$$typeof===n||i.$$typeof===w||i.$$typeof===x||i.$$typeof===y||i.$$typeof===v)},reactIs_production_min.typeOf=z,reactIs$1.exports=reactIs_production_min;var reactIs=reactIs$1.exports,REACT_STATICS={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},KNOWN_STATICS={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},FORWARD_REF_STATICS={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},MEMO_STATICS={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},TYPE_STATICS={};TYPE_STATICS[reactIs.ForwardRef]=FORWARD_REF_STATICS,TYPE_STATICS[reactIs.Memo]=MEMO_STATICS;function getStatics(i){return reactIs.isMemo(i)?MEMO_STATICS:TYPE_STATICS[i.$$typeof]||REACT_STATICS}var defineProperty=Object.defineProperty,getOwnPropertyNames=Object.getOwnPropertyNames,getOwnPropertySymbols=Object.getOwnPropertySymbols,getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,getPrototypeOf=Object.getPrototypeOf,objectPrototype=Object.prototype;function hoistNonReactStatics(i,o,a){if(typeof o!="string"){if(objectPrototype){var s=getPrototypeOf(o);s&&s!==objectPrototype&&hoistNonReactStatics(i,s,a)}var u=getOwnPropertyNames(o);getOwnPropertySymbols&&(u=u.concat(getOwnPropertySymbols(o)));for(var _=getStatics(i),S=getStatics(o),O=0;O<u.length;++O){var D=u[O];if(!KNOWN_STATICS[D]&&!(a&&a[D])&&!(S&&S[D])&&!(_&&_[D])){var T=getOwnPropertyDescriptor(o,D);try{defineProperty(i,D,T)}catch{}}}}return i}var hoistNonReactStatics_cjs=hoistNonReactStatics,hoistStatics=hoistNonReactStatics_cjs;function _typeof(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(a){return typeof a}:_typeof=function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof(i)}function _slicedToArray(i,o){return _arrayWithHoles(i)||_iterableToArrayLimit(i,o)||_unsupportedIterableToArray(i,o)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray(i,o){if(!!i){if(typeof i=="string")return _arrayLikeToArray(i,o);var a=Object.prototype.toString.call(i).slice(8,-1);if(a==="Object"&&i.constructor&&(a=i.constructor.name),a==="Map"||a==="Set")return Array.from(i);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return _arrayLikeToArray(i,o)}}function _arrayLikeToArray(i,o){(o==null||o>i.length)&&(o=i.length);for(var a=0,s=new Array(o);a<o;a++)s[a]=i[a];return s}function _iterableToArrayLimit(i,o){var a=i==null?null:typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(a!=null){var s=[],u=!0,_=!1,S,O;try{for(a=a.call(i);!(u=(S=a.next()).done)&&(s.push(S.value),!(o&&s.length===o));u=!0);}catch(D){_=!0,O=D}finally{try{!u&&a.return!=null&&a.return()}finally{if(_)throw O}}return s}}function _arrayWithHoles(i){if(Array.isArray(i))return i}function _classCallCheck$4(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function _defineProperties$4(i,o){for(var a=0;a<o.length;a++){var s=o[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function _createClass$4(i,o,a){return o&&_defineProperties$4(i.prototype,o),a&&_defineProperties$4(i,a),i}function _inherits(i,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(o&&o.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),o&&_setPrototypeOf(i,o)}function _setPrototypeOf(i,o){return _setPrototypeOf=Object.setPrototypeOf||function(s,u){return s.__proto__=u,s},_setPrototypeOf(i,o)}function _createSuper(i){var o=_isNativeReflectConstruct();return function(){var s=_getPrototypeOf(i),u;if(o){var _=_getPrototypeOf(this).constructor;u=Reflect.construct(s,arguments,_)}else u=s.apply(this,arguments);return _possibleConstructorReturn(this,u)}}function _possibleConstructorReturn(i,o){if(o&&(_typeof(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(i)}function _assertThisInitialized(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function _isNativeReflectConstruct(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf(i){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)},_getPrototypeOf(i)}function _defineProperty$4(i,o,a){return o in i?Object.defineProperty(i,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[o]=a,i}function decorateHandler(i){var o=i.DecoratedComponent,a=i.createHandler,s=i.createMonitor,u=i.createConnector,_=i.registerHandler,S=i.containerDisplayName,O=i.getType,D=i.collect,T=i.options,E=T.arePropsEqual,P=E===void 0?shallowEqual:E,R=o,N=o.displayName||o.name||"Component",M=function($){_inherits(H,$);var j=_createSuper(H);function H(I){var C;return _classCallCheck$4(this,H),C=j.call(this,I),_defineProperty$4(_assertThisInitialized(C),"decoratedRef",React.createRef()),_defineProperty$4(_assertThisInitialized(C),"handlerId",void 0),_defineProperty$4(_assertThisInitialized(C),"manager",void 0),_defineProperty$4(_assertThisInitialized(C),"handlerMonitor",void 0),_defineProperty$4(_assertThisInitialized(C),"handlerConnector",void 0),_defineProperty$4(_assertThisInitialized(C),"handler",void 0),_defineProperty$4(_assertThisInitialized(C),"disposable",void 0),_defineProperty$4(_assertThisInitialized(C),"currentType",void 0),_defineProperty$4(_assertThisInitialized(C),"handleChange",function(){var L=C.getCurrentState();shallowEqual(L,C.state)||C.setState(L)}),C.disposable=new SerialDisposable,C.receiveProps(I),C.dispose(),C}return _createClass$4(H,[{key:"getHandlerId",value:function(){return this.handlerId}},{key:"getDecoratedComponentInstance",value:function(){return invariant$1(this.decoratedRef.current,"In order to access an instance of the decorated component, it must either be a class component or use React.forwardRef()"),this.decoratedRef.current}},{key:"shouldComponentUpdate",value:function(C,L){return!P(C,this.props)||!shallowEqual(L,this.state)}},{key:"componentDidMount",value:function(){this.disposable=new SerialDisposable,this.currentType=void 0,this.receiveProps(this.props),this.handleChange()}},{key:"componentDidUpdate",value:function(C){P(this.props,C)||(this.receiveProps(this.props),this.handleChange())}},{key:"componentWillUnmount",value:function(){this.dispose()}},{key:"receiveProps",value:function(C){!this.handler||(this.handler.receiveProps(C),this.receiveType(O(C)))}},{key:"receiveType",value:function(C){if(!(!this.handlerMonitor||!this.manager||!this.handlerConnector)&&C!==this.currentType){this.currentType=C;var L=_(C,this.handler,this.manager),F=_slicedToArray(L,2),U=F[0],G=F[1];this.handlerId=U,this.handlerMonitor.receiveHandlerId(U),this.handlerConnector.receiveHandlerId(U);var Y=this.manager.getMonitor(),J=Y.subscribeToStateChange(this.handleChange,{handlerIds:[U]});this.disposable.setDisposable(new CompositeDisposable(new Disposable(J),new Disposable(G)))}}},{key:"dispose",value:function(){this.disposable.dispose(),this.handlerConnector&&this.handlerConnector.receiveHandlerId(null)}},{key:"getCurrentState",value:function(){if(!this.handlerConnector)return{};var C=D(this.handlerConnector.hooks,this.handlerMonitor,this.props);return C}},{key:"render",value:function(){var C=this;return jsx(DndContext.Consumer,{children:function(F){var U=F.dragDropManager;return C.receiveDragDropManager(U),typeof requestAnimationFrame!="undefined"&&requestAnimationFrame(function(){var G;return(G=C.handlerConnector)===null||G===void 0?void 0:G.reconnect()}),jsx(R,Object.assign({},C.props,C.getCurrentState(),{ref:isRefable(R)?C.decoratedRef:null}),void 0)}},void 0)}},{key:"receiveDragDropManager",value:function(C){this.manager===void 0&&(invariant$1(C!==void 0,"Could not find the drag and drop manager in the context of %s. Make sure to render a DndProvider component in your top-level component. Read more: http://react-dnd.github.io/react-dnd/docs/troubleshooting#could-not-find-the-drag-and-drop-manager-in-the-context",N,N),C!==void 0&&(this.manager=C,this.handlerMonitor=s(C),this.handlerConnector=u(C.getBackend()),this.handler=a(this.handlerMonitor,this.decoratedRef)))}}]),H}(React.Component);return _defineProperty$4(M,"DecoratedComponent",o),_defineProperty$4(M,"displayName","".concat(S,"(").concat(N,")")),hoistStatics(M,o)}function _classCallCheck$3(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function _defineProperties$3(i,o){for(var a=0;a<o.length;a++){var s=o[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function _createClass$3(i,o,a){return o&&_defineProperties$3(i.prototype,o),a&&_defineProperties$3(i,a),i}function _defineProperty$3(i,o,a){return o in i?Object.defineProperty(i,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[o]=a,i}var ALLOWED_SPEC_METHODS$1=["canDrag","beginDrag","isDragging","endDrag"],REQUIRED_SPEC_METHODS=["beginDrag"],SourceImpl=function(){function i(o,a,s){var u=this;_classCallCheck$3(this,i),_defineProperty$3(this,"props",null),_defineProperty$3(this,"spec",void 0),_defineProperty$3(this,"monitor",void 0),_defineProperty$3(this,"ref",void 0),_defineProperty$3(this,"beginDrag",function(){if(!!u.props){var _=u.spec.beginDrag(u.props,u.monitor,u.ref.current);return _}}),this.spec=o,this.monitor=a,this.ref=s}return _createClass$3(i,[{key:"receiveProps",value:function(a){this.props=a}},{key:"canDrag",value:function(){return this.props?this.spec.canDrag?this.spec.canDrag(this.props,this.monitor):!0:!1}},{key:"isDragging",value:function(a,s){return this.props?this.spec.isDragging?this.spec.isDragging(this.props,this.monitor):s===a.getSourceId():!1}},{key:"endDrag",value:function(){!this.props||!this.spec.endDrag||this.spec.endDrag(this.props,this.monitor,getDecoratedComponent(this.ref))}}]),i}();function createSourceFactory(i){return Object.keys(i).forEach(function(o){invariant$1(ALLOWED_SPEC_METHODS$1.indexOf(o)>-1,'Expected the drag source specification to only have some of the following keys: %s. Instead received a specification with an unexpected "%s" key. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source',ALLOWED_SPEC_METHODS$1.join(", "),o),invariant$1(typeof i[o]=="function","Expected %s in the drag source specification to be a function. Instead received a specification with %s: %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source",o,o,i[o])}),REQUIRED_SPEC_METHODS.forEach(function(o){invariant$1(typeof i[o]=="function","Expected %s in the drag source specification to be a function. Instead received a specification with %s: %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source",o,o,i[o])}),function(a,s){return new SourceImpl(i,a,s)}}function DragSource(i,o,a){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},u=i;typeof i!="function"&&(invariant$1(isValidType(i),'Expected "type" provided as the first argument to DragSource to be a string, or a function that returns a string given the current props. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source',i),u=function(){return i}),invariant$1(isPlainObject(o),'Expected "spec" provided as the second argument to DragSource to be a plain object. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source',o);var _=createSourceFactory(o);return invariant$1(typeof a=="function",'Expected "collect" provided as the third argument to DragSource to be a function that returns a plain object of props to inject. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source',a),invariant$1(isPlainObject(s),'Expected "options" provided as the fourth argument to DragSource to be a plain object when specified. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source',a),function(O){return decorateHandler({containerDisplayName:"DragSource",createHandler:_,registerHandler:registerSource,createConnector:function(T){return new SourceConnector(T)},createMonitor:function(T){return new DragSourceMonitorImpl(T)},DecoratedComponent:O,getType:u,collect:a,options:s})}}function _classCallCheck$2(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function _defineProperties$2(i,o){for(var a=0;a<o.length;a++){var s=o[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function _createClass$2(i,o,a){return o&&_defineProperties$2(i.prototype,o),a&&_defineProperties$2(i,a),i}function _defineProperty$2(i,o,a){return o in i?Object.defineProperty(i,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[o]=a,i}var ALLOWED_SPEC_METHODS=["canDrop","hover","drop"],TargetImpl=function(){function i(o,a,s){_classCallCheck$2(this,i),_defineProperty$2(this,"props",null),_defineProperty$2(this,"spec",void 0),_defineProperty$2(this,"monitor",void 0),_defineProperty$2(this,"ref",void 0),this.spec=o,this.monitor=a,this.ref=s}return _createClass$2(i,[{key:"receiveProps",value:function(a){this.props=a}},{key:"receiveMonitor",value:function(a){this.monitor=a}},{key:"canDrop",value:function(){return this.spec.canDrop?this.spec.canDrop(this.props,this.monitor):!0}},{key:"hover",value:function(){!this.spec.hover||!this.props||this.spec.hover(this.props,this.monitor,getDecoratedComponent(this.ref))}},{key:"drop",value:function(){if(!!this.spec.drop){var a=this.spec.drop(this.props,this.monitor,this.ref.current);return a}}}]),i}();function createTargetFactory(i){return Object.keys(i).forEach(function(o){invariant$1(ALLOWED_SPEC_METHODS.indexOf(o)>-1,'Expected the drop target specification to only have some of the following keys: %s. Instead received a specification with an unexpected "%s" key. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target',ALLOWED_SPEC_METHODS.join(", "),o),invariant$1(typeof i[o]=="function","Expected %s in the drop target specification to be a function. Instead received a specification with %s: %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target",o,o,i[o])}),function(a,s){return new TargetImpl(i,a,s)}}function DropTarget(i,o,a){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},u=i;typeof i!="function"&&(invariant$1(isValidType(i,!0),'Expected "type" provided as the first argument to DropTarget to be a string, an array of strings, or a function that returns either given the current props. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target',i),u=function(){return i}),invariant$1(isPlainObject(o),'Expected "spec" provided as the second argument to DropTarget to be a plain object. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target',o);var _=createTargetFactory(o);return invariant$1(typeof a=="function",'Expected "collect" provided as the third argument to DropTarget to be a function that returns a plain object of props to inject. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target',a),invariant$1(isPlainObject(s),'Expected "options" provided as the fourth argument to DropTarget to be a plain object when specified. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target',a),function(O){return decorateHandler({containerDisplayName:"DropTarget",createHandler:_,registerHandler:registerTarget,createMonitor:function(T){return new DropTargetMonitorImpl(T)},createConnector:function(T){return new TargetConnector(T)},DecoratedComponent:O,getType:u,collect:a,options:s})}}class FormContainer extends React__namespace.Component{constructor(){super(...arguments);W(this,"formElementRef",React__namespace.createRef())}getHtml(){return{__html:this.props.template.replace(/__prefix__/g,this.props.form.id.toString())}}render(){return jsx("div",{className:"condensed-inline-panel__form",dangerouslySetInnerHTML:this.getHtml(),ref:this.formElementRef})}componentDidMount(){let formElement=this.formElementRef.current;if(!formElement)throw Error("Cannot find form element");for(let i in this.props.form.fields){let o=document.getElementById(`${this.props.prefix}-${i}`);if(o instanceof HTMLInputElement||o instanceof HTMLTextAreaElement||o instanceof HTMLSelectElement)if(o instanceof HTMLInputElement&&o.type==="checkbox"){let a=o;a.checked=this.props.form.fields[i]}else o.value=this.props.form.fields[i]}if(this.props.form.errors)for(let i in this.props.form.errors){let o=document.getElementById(`${this.props.prefix}-${i}`);if(o===null)continue;let a=o.closest(".field");if(a===null)continue;a.classList.add("error");let s=a.getElementsByClassName("field-content")[0]||a,u=document.createElement("p");u.classList.add("error-message"),u.innerHTML=`<span>${this.props.form.errors[i].map(_=>_.message).join(" ")}</span>`,s.appendChild(u)}formElement.querySelectorAll("script").forEach(scriptTag=>{eval(scriptTag.innerHTML)}),formElement.querySelectorAll(".page-chooser").forEach(i=>{let o=i.id.match(/id_[^-]*-\d+-([^-]*)-chooser/);if(o){let a=o[1];this.props.form.fields[a]&&(i.classList.remove("blank"),i.getElementsByClassName("title")[0].textContent=this.props.form.extra[a].title)}}),formElement.querySelectorAll(".image-chooser").forEach(i=>{let o=i.id.match(/id_[^-]*-\d+-([^-]*)-chooser/);if(o){let a=o[1];if(this.props.form.fields[a]){i.classList.remove("blank");let s=i.querySelector(".preview-image img");s instanceof HTMLImageElement&&(s.src=this.props.form.extra[a].preview_image.src,s.alt=this.props.form.extra[a].preview_image.alt,s.width=this.props.form.extra[a].preview_image.width,s.height=this.props.form.extra[a].preview_image.height)}}}),formElement.querySelectorAll(".snippet-chooser").forEach(i=>{let o=i.id.match(/id_[^-]*-\d+-([^-]*)-chooser/);if(o){let a=o[1];this.props.form.fields[a]&&(i.classList.remove("blank"),i.getElementsByClassName("title")[0].textContent=this.props.form.extra[a].title)}}),formElement.querySelectorAll(".document-chooser").forEach(i=>{let o=i.id.match(/id_[^-]*-\d+-([^-]*)-chooser/);if(o){let a=o[1];this.props.form.fields[a]&&(i.classList.remove("blank"),i.getElementsByClassName("title")[0].textContent=this.props.form.extra[a].title)}})}}class Card extends React__namespace.Component{constructor(o){super(o);this.state={showDeleteConfirm:!1}}shouldRenderForm(o=this.props){return o.form.forceFormRender?!0:(o.form.isEditing||o.form.hasChanged||o.form.isDeleted)&&o.canEdit}onEditStart(o){return this.props.onEditStart(o)}onEditClose(o){let a={};for(let s in this.props.form.fields){let u=document.getElementById(`${this.props.formPrefix}-${s}`);(u instanceof HTMLInputElement||u instanceof HTMLTextAreaElement||u instanceof HTMLSelectElement)&&(a[s]=u.value)}return this.props.onEditClose(o,a)}onDelete(o){return this.setState({showDeleteConfirm:!0}),o.preventDefault(),!1}onDeleteCancel(o){return this.setState({showDeleteConfirm:!1}),o.preventDefault(),!1}onDeleteConfirm(o){return this.props.onDelete(o)}renderActions(){let o=[];return this.props.canEdit&&(this.props.form.isEditing?o.push(jsx("li",{onClick:this.onEditClose.bind(this),className:"condensed-inline-panel__action condensed-inline-panel__action-close icon icon-edit"},"edit-close")):o.push(jsx("li",{onClick:this.onEditStart.bind(this),className:"condensed-inline-panel__action condensed-inline-panel__action-edit icon icon-edit"},"edit-start"))),this.props.canDelete&&o.push(jsx("li",{onClick:this.onDelete.bind(this),className:"condensed-inline-panel__action condensed-inline-panel__action-delete icon icon-bin"},"delete")),this.props.customiseActions&&this.props.customiseActions(this.props,o),this.props.canDelete&&this.state.showDeleteConfirm&&(o=[jsx("li",{className:"condensed-inline-panel__delete-confirm-message",children:"Are you sure that you want to delete this?"},"delete-confirm"),jsx("li",{onClick:this.onDeleteConfirm.bind(this),className:"condensed-inline-panel__action condensed-inline-panel__action-delete-confirm icon icon-tick"},"delete"),jsx("li",{onClick:this.onDeleteCancel.bind(this),className:"condensed-inline-panel__action condensed-inline-panel__action-delete-confirm-cancel icon icon-cross"},"cancel")]),o}getClassNames(){let o=["condensed-inline-panel__card"];return this.props.form.errors&&Object.keys(this.props.form.errors).length>0&&o.push("condensed-inline-panel__card--errors"),this.props.form.isNew?o.push("condensed-inline-panel__card--new"):this.props.form.hasChanged&&o.push("condensed-inline-panel__card--changed"),this.props.form.isDeleted?o.push("condensed-inline-panel__card--deleted"):this.props.form.isEditing&&o.push("condensed-inline-panel__card--editing"),this.props.isDragging&&o.push("condensed-inline-panel__card--dragging"),o}render(){let o=jsx("div",{className:"condensed-inline-panel__form"});this.shouldRenderForm()&&(o=jsx(FormContainer,{form:this.props.form,template:this.props.template,prefix:this.props.formPrefix}));let a=jsxs("div",{className:"condensed-inline-panel__card-header",children:[jsx("ul",{className:"condensed-inline-panel__actions",children:this.renderActions()}),jsx("h2",{dangerouslySetInnerHTML:this.props.renderCardHeader(this.props.form)})]});return a=this.props.connectDragSource(a),jsxs("div",{className:this.getClassNames().join(" "),children:[a,o]})}}let dragSource={canDrag(i,o){return i.canOrder},beginDrag(i,o,a){return{formId:i.form.id}}};function dragSourceCollect(i,o){return{connectDragSource:i.dragSource(),isDragging:o.isDragging()}}let DraggableCard=DragSource(i=>i.dndKey,dragSource,dragSourceCollect)(Card);function invariant(i,o){for(var a=arguments.length,s=new Array(a>2?a-2:0),u=2;u<a;u++)s[u-2]=arguments[u];if(!i){var _;if(o===void 0)_=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var S=0;_=new Error(o.replace(/%s/g,function(){return s[S++]})),_.name="Invariant Violation"}throw _.framesToPop=1,_}}var ListenerType;(function(i){i.mouse="mouse",i.touch="touch",i.keyboard="keyboard"})(ListenerType||(ListenerType={}));var MouseButtons={Left:1,Right:2,Center:4},MouseButton={Left:0,Center:1,Right:2};function eventShouldStartDrag(i){return i.button===void 0||i.button===MouseButton.Left}function eventShouldEndDrag(i){return i.buttons===void 0||(i.buttons&MouseButtons.Left)===0}function isTouchEvent(i){return!!i.targetTouches}var ELEMENT_NODE=1;function getNodeClientOffset(i){var o=i.nodeType===ELEMENT_NODE?i:i.parentElement;if(!!o){var a=o.getBoundingClientRect(),s=a.top,u=a.left;return{x:u,y:s}}}function getEventClientTouchOffset(i,o){if(i.targetTouches.length===1)return getEventClientOffset(i.targetTouches[0]);if(o&&i.touches.length===1&&i.touches[0].target===o.target)return getEventClientOffset(i.touches[0])}function getEventClientOffset(i,o){return isTouchEvent(i)?getEventClientTouchOffset(i,o):{x:i.clientX,y:i.clientY}}function distance(i,o,a,s){return Math.sqrt(Math.pow(Math.abs(a-i),2)+Math.pow(Math.abs(s-o),2))}function inAngleRanges(i,o,a,s,u){if(!u)return!1;for(var _=Math.atan2(s-o,a-i)*180/Math.PI+180,S=0;S<u.length;++S)if((u[S].start==null||_>=u[S].start)&&(u[S].end==null||_<=u[S].end))return!0;return!1}var supportsPassive=function(){var i=!1;try{addEventListener("test",function(){},Object.defineProperty({},"passive",{get:function(){return i=!0,!0}}))}catch{}return i}();function _classCallCheck$1(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function _defineProperties$1(i,o){for(var a=0;a<o.length;a++){var s=o[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function _createClass$1(i,o,a){return o&&_defineProperties$1(i.prototype,o),a&&_defineProperties$1(i,a),i}function _defineProperty$1(i,o,a){return o in i?Object.defineProperty(i,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[o]=a,i}var OptionsReader=function(){function i(o,a){_classCallCheck$1(this,i),_defineProperty$1(this,"args",void 0),_defineProperty$1(this,"context",void 0),this.args=o,this.context=a}return _createClass$1(i,[{key:"delay",get:function(){var a;return(a=this.args.delay)!==null&&a!==void 0?a:0}},{key:"scrollAngleRanges",get:function(){return this.args.scrollAngleRanges}},{key:"getDropTargetElementsAtPoint",get:function(){return this.args.getDropTargetElementsAtPoint}},{key:"ignoreContextMenu",get:function(){var a;return(a=this.args.ignoreContextMenu)!==null&&a!==void 0?a:!1}},{key:"enableHoverOutsideTarget",get:function(){var a;return(a=this.args.enableHoverOutsideTarget)!==null&&a!==void 0?a:!1}},{key:"enableKeyboardEvents",get:function(){var a;return(a=this.args.enableKeyboardEvents)!==null&&a!==void 0?a:!1}},{key:"enableMouseEvents",get:function(){var a;return(a=this.args.enableMouseEvents)!==null&&a!==void 0?a:!1}},{key:"enableTouchEvents",get:function(){var a;return(a=this.args.enableTouchEvents)!==null&&a!==void 0?a:!0}},{key:"touchSlop",get:function(){return this.args.touchSlop||0}},{key:"delayTouchStart",get:function(){var a,s,u,_;return(a=(s=(u=this.args)===null||u===void 0?void 0:u.delayTouchStart)!==null&&s!==void 0?s:(_=this.args)===null||_===void 0?void 0:_.delay)!==null&&a!==void 0?a:0}},{key:"delayMouseStart",get:function(){var a,s,u,_;return(a=(s=(u=this.args)===null||u===void 0?void 0:u.delayMouseStart)!==null&&s!==void 0?s:(_=this.args)===null||_===void 0?void 0:_.delay)!==null&&a!==void 0?a:0}},{key:"window",get:function(){if(this.context&&this.context.window)return this.context.window;if(typeof window!="undefined")return window}},{key:"document",get:function(){var a;if((a=this.context)!==null&&a!==void 0&&a.document)return this.context.document;if(this.window)return this.window.document}},{key:"rootElement",get:function(){var a;return((a=this.args)===null||a===void 0?void 0:a.rootElement)||this.document}}]),i}(),_eventNames;function _classCallCheck(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function _defineProperties(i,o){for(var a=0;a<o.length;a++){var s=o[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function _createClass(i,o,a){return o&&_defineProperties(i.prototype,o),a&&_defineProperties(i,a),i}function _defineProperty(i,o,a){return o in i?Object.defineProperty(i,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[o]=a,i}var eventNames=(_eventNames={},_defineProperty(_eventNames,ListenerType.mouse,{start:"mousedown",move:"mousemove",end:"mouseup",contextmenu:"contextmenu"}),_defineProperty(_eventNames,ListenerType.touch,{start:"touchstart",move:"touchmove",end:"touchend"}),_defineProperty(_eventNames,ListenerType.keyboard,{keydown:"keydown"}),_eventNames),TouchBackendImpl=function(){function i(o,a,s){var u=this;_classCallCheck(this,i),_defineProperty(this,"options",void 0),_defineProperty(this,"actions",void 0),_defineProperty(this,"monitor",void 0),_defineProperty(this,"sourceNodes",void 0),_defineProperty(this,"sourcePreviewNodes",void 0),_defineProperty(this,"sourcePreviewNodeOptions",void 0),_defineProperty(this,"targetNodes",void 0),_defineProperty(this,"_mouseClientOffset",void 0),_defineProperty(this,"_isScrolling",void 0),_defineProperty(this,"listenerTypes",void 0),_defineProperty(this,"moveStartSourceIds",void 0),_defineProperty(this,"waitingForDelay",void 0),_defineProperty(this,"timeout",void 0),_defineProperty(this,"dragOverTargetIds",void 0),_defineProperty(this,"draggedSourceNode",void 0),_defineProperty(this,"draggedSourceNodeRemovalObserver",void 0),_defineProperty(this,"lastTargetTouchFallback",void 0),_defineProperty(this,"getSourceClientOffset",function(_){var S=u.sourceNodes.get(_);return S&&getNodeClientOffset(S)}),_defineProperty(this,"handleTopMoveStartCapture",function(_){!eventShouldStartDrag(_)||(u.moveStartSourceIds=[])}),_defineProperty(this,"handleMoveStart",function(_){Array.isArray(u.moveStartSourceIds)&&u.moveStartSourceIds.unshift(_)}),_defineProperty(this,"handleTopMoveStart",function(_){if(!!eventShouldStartDrag(_)){var S=getEventClientOffset(_);S&&(isTouchEvent(_)&&(u.lastTargetTouchFallback=_.targetTouches[0]),u._mouseClientOffset=S),u.waitingForDelay=!1}}),_defineProperty(this,"handleTopMoveStartDelay",function(_){if(!!eventShouldStartDrag(_)){var S=_.type===eventNames.touch.start?u.options.delayTouchStart:u.options.delayMouseStart;u.timeout=setTimeout(u.handleTopMoveStart.bind(u,_),S),u.waitingForDelay=!0}}),_defineProperty(this,"handleTopMoveCapture",function(){u.dragOverTargetIds=[]}),_defineProperty(this,"handleMove",function(_,S){u.dragOverTargetIds&&u.dragOverTargetIds.unshift(S)}),_defineProperty(this,"handleTopMove",function(_){if(u.timeout&&clearTimeout(u.timeout),!(!u.document||u.waitingForDelay)){var S=u.moveStartSourceIds,O=u.dragOverTargetIds,D=u.options.enableHoverOutsideTarget,T=getEventClientOffset(_,u.lastTargetTouchFallback);if(!!T){if(u._isScrolling||!u.monitor.isDragging()&&inAngleRanges(u._mouseClientOffset.x||0,u._mouseClientOffset.y||0,T.x,T.y,u.options.scrollAngleRanges)){u._isScrolling=!0;return}if(!u.monitor.isDragging()&&u._mouseClientOffset.hasOwnProperty("x")&&S&&distance(u._mouseClientOffset.x||0,u._mouseClientOffset.y||0,T.x,T.y)>(u.options.touchSlop?u.options.touchSlop:0)&&(u.moveStartSourceIds=void 0,u.actions.beginDrag(S,{clientOffset:u._mouseClientOffset,getSourceClientOffset:u.getSourceClientOffset,publishSource:!1})),!!u.monitor.isDragging()){var E=u.sourceNodes.get(u.monitor.getSourceId());u.installSourceNodeRemovalObserver(E),u.actions.publishDragSource(),_.cancelable&&_.preventDefault();var P=(O||[]).map(function(C){return u.targetNodes.get(C)}).filter(function(C){return!!C}),R=u.options.getDropTargetElementsAtPoint?u.options.getDropTargetElementsAtPoint(T.x,T.y,P):u.document.elementsFromPoint(T.x,T.y),N=[];for(var M in R)if(!!R.hasOwnProperty(M)){var $=R[M];for(N.push($);$;)$=$.parentElement,$&&N.indexOf($)===-1&&N.push($)}var j=N.filter(function(C){return P.indexOf(C)>-1}).map(function(C){return u._getDropTargetId(C)}).filter(function(C){return!!C}).filter(function(C,L,F){return F.indexOf(C)===L});if(D)for(var H in u.targetNodes){var I=u.targetNodes.get(H);if(E&&I&&I.contains(E)&&j.indexOf(H)===-1){j.unshift(H);break}}j.reverse(),u.actions.hover(j,{clientOffset:T})}}}}),_defineProperty(this,"_getDropTargetId",function(_){for(var S=u.targetNodes.keys(),O=S.next();O.done===!1;){var D=O.value;if(_===u.targetNodes.get(D))return D;O=S.next()}}),_defineProperty(this,"handleTopMoveEndCapture",function(_){if(u._isScrolling=!1,u.lastTargetTouchFallback=void 0,!!eventShouldEndDrag(_)){if(!u.monitor.isDragging()||u.monitor.didDrop()){u.moveStartSourceIds=void 0;return}_.cancelable&&_.preventDefault(),u._mouseClientOffset={},u.uninstallSourceNodeRemovalObserver(),u.actions.drop(),u.actions.endDrag()}}),_defineProperty(this,"handleCancelOnEscape",function(_){_.key==="Escape"&&u.monitor.isDragging()&&(u._mouseClientOffset={},u.uninstallSourceNodeRemovalObserver(),u.actions.endDrag())}),this.options=new OptionsReader(s,a),this.actions=o.getActions(),this.monitor=o.getMonitor(),this.sourceNodes=new Map,this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.targetNodes=new Map,this.listenerTypes=[],this._mouseClientOffset={},this._isScrolling=!1,this.options.enableMouseEvents&&this.listenerTypes.push(ListenerType.mouse),this.options.enableTouchEvents&&this.listenerTypes.push(ListenerType.touch),this.options.enableKeyboardEvents&&this.listenerTypes.push(ListenerType.keyboard)}return _createClass(i,[{key:"profile",value:function(){var a;return{sourceNodes:this.sourceNodes.size,sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,targetNodes:this.targetNodes.size,dragOverTargetIds:((a=this.dragOverTargetIds)===null||a===void 0?void 0:a.length)||0}}},{key:"document",get:function(){return this.options.document}},{key:"setup",value:function(){var a=this.options.rootElement;!a||(invariant(!i.isSetUp,"Cannot have two Touch backends at the same time."),i.isSetUp=!0,this.addEventListener(a,"start",this.getTopMoveStartHandler()),this.addEventListener(a,"start",this.handleTopMoveStartCapture,!0),this.addEventListener(a,"move",this.handleTopMove),this.addEventListener(a,"move",this.handleTopMoveCapture,!0),this.addEventListener(a,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.addEventListener(a,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.addEventListener(a,"keydown",this.handleCancelOnEscape,!0))}},{key:"teardown",value:function(){var a=this.options.rootElement;!a||(i.isSetUp=!1,this._mouseClientOffset={},this.removeEventListener(a,"start",this.handleTopMoveStartCapture,!0),this.removeEventListener(a,"start",this.handleTopMoveStart),this.removeEventListener(a,"move",this.handleTopMoveCapture,!0),this.removeEventListener(a,"move",this.handleTopMove),this.removeEventListener(a,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.removeEventListener(a,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.removeEventListener(a,"keydown",this.handleCancelOnEscape,!0),this.uninstallSourceNodeRemovalObserver())}},{key:"addEventListener",value:function(a,s,u,_){var S=supportsPassive?{capture:_,passive:!1}:_;this.listenerTypes.forEach(function(O){var D=eventNames[O][s];D&&a.addEventListener(D,u,S)})}},{key:"removeEventListener",value:function(a,s,u,_){var S=supportsPassive?{capture:_,passive:!1}:_;this.listenerTypes.forEach(function(O){var D=eventNames[O][s];D&&a.removeEventListener(D,u,S)})}},{key:"connectDragSource",value:function(a,s){var u=this,_=this.handleMoveStart.bind(this,a);return this.sourceNodes.set(a,s),this.addEventListener(s,"start",_),function(){u.sourceNodes.delete(a),u.removeEventListener(s,"start",_)}}},{key:"connectDragPreview",value:function(a,s,u){var _=this;return this.sourcePreviewNodeOptions.set(a,u),this.sourcePreviewNodes.set(a,s),function(){_.sourcePreviewNodes.delete(a),_.sourcePreviewNodeOptions.delete(a)}}},{key:"connectDropTarget",value:function(a,s){var u=this,_=this.options.rootElement;if(!this.document||!_)return function(){};var S=function(D){if(!(!u.document||!_||!u.monitor.isDragging())){var T;switch(D.type){case eventNames.mouse.move:T={x:D.clientX,y:D.clientY};break;case eventNames.touch.move:T={x:D.touches[0].clientX,y:D.touches[0].clientY};break}var E=T!=null?u.document.elementFromPoint(T.x,T.y):void 0,P=E&&s.contains(E);if(E===s||P)return u.handleMove(D,a)}};return this.addEventListener(this.document.body,"move",S),this.targetNodes.set(a,s),function(){u.document&&(u.targetNodes.delete(a),u.removeEventListener(u.document.body,"move",S))}}},{key:"getTopMoveStartHandler",value:function(){return!this.options.delayTouchStart&&!this.options.delayMouseStart?this.handleTopMoveStart:this.handleTopMoveStartDelay}},{key:"installSourceNodeRemovalObserver",value:function(a){var s=this;this.uninstallSourceNodeRemovalObserver(),this.draggedSourceNode=a,this.draggedSourceNodeRemovalObserver=new MutationObserver(function(){a&&!a.parentElement&&(s.resurrectSourceNode(),s.uninstallSourceNodeRemovalObserver())}),!(!a||!a.parentElement)&&this.draggedSourceNodeRemovalObserver.observe(a.parentElement,{childList:!0})}},{key:"resurrectSourceNode",value:function(){this.document&&this.draggedSourceNode&&(this.draggedSourceNode.style.display="none",this.draggedSourceNode.removeAttribute("data-reactid"),this.document.body.appendChild(this.draggedSourceNode))}},{key:"uninstallSourceNodeRemovalObserver",value:function(){this.draggedSourceNodeRemovalObserver&&this.draggedSourceNodeRemovalObserver.disconnect(),this.draggedSourceNodeRemovalObserver=void 0,this.draggedSourceNode=void 0}}]),i}();_defineProperty(TouchBackendImpl,"isSetUp",void 0);var TouchBackend=function i(o){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return new TouchBackendImpl(o,a,s)};class Gap extends React__namespace.Component{drop(o){this.props.onDND&&this.props.onDND(o,this.props.position)}render(){let o=["condensed-inline-panel__gap"],a=null;if(this.props.isOver)o.push("condensed-inline-panel__gap--over"),a=jsx("div",{className:o.join(" "),children:jsx("div",{className:"condensed-inline-panel__gap-pseudoform"})});else{let s=u=>(this.props.onAdd(this.props.position),u.preventDefault(),!1);a=jsx("div",{className:o.join(" "),children:jsx("a",{className:"condensed-inline-panel__add-button icon icon-plus-inverse",href:"#",onClick:s})})}return a=this.props.connectDropTarget(a),a}}let dropTarget={drop(i,o,a){a.drop(o.getItem().formId)}};function dropTargetCollect(i,o){return{connectDropTarget:i.dropTarget(),isOver:o.canDrop()&&o.isOver()}}let DroppableGap=DropTarget(i=>i.dndKey,dropTarget,dropTargetCollect)(Gap);class CardSet extends React__namespace.Component{initGaps(o,a,s){let u=1,_=[];_.push(jsx(DroppableGap,{position:u++,dndKey:this.props.dndKey||this.props.formsetPrefix,onDND:a,onAdd:s},"gap-"+u));for(let S=0;S<o.length;S++)_.push(o[S]),_.push(jsx(DroppableGap,{position:u++,dndKey:this.props.dndKey||this.props.formsetPrefix,onDND:a,onAdd:s},"gap-"+u));return _}render(){let o=[],a=this.props.forms.slice();this.props.sortCompareFunc&&a.sort(this.props.sortCompareFunc);for(let S in a){let O=a[S],D=P=>{let R=JSON.parse(JSON.stringify(O));return R.isEditing=!0,R.hasChanged=!0,this.props.store.dispatch({type:"SET_FORM",formId:R.id,data:R}),P.preventDefault(),!1},T=P=>{let R=JSON.parse(JSON.stringify(O));return R.isDeleted=!0,this.props.store.dispatch({type:"SET_FORM",formId:R.id,data:R}),P.preventDefault(),!1},E=(P,R)=>{let N=JSON.parse(JSON.stringify(O));return N.isEditing=!1,N.fields=R,this.props.store.dispatch({type:"SET_FORM",formId:N.id,data:N}),P.preventDefault(),!1};o.push(jsx(DraggableCard,{form:O,renderCardHeader:this.props.renderCardHeader,canEdit:this.props.canEdit,canDelete:this.props.canDelete,canOrder:this.props.canOrder,template:this.props.formTemplate,formPrefix:`${this.props.formsetPrefix}-${O.id.toString()}`,customiseActions:this.props.customiseCardActions,dndKey:this.props.dndKey||this.props.formsetPrefix,onEditStart:D,onEditClose:E,onDelete:T},O.id))}let s=this.props.onDND||((S,O)=>{this.props.store.dispatch({type:"MOVE_FORM",formId:S,position:O})}),u=S=>{let O=this.props.forms.length;this.props.store.dispatch({type:"ADD_FORM",data:{fields:this.props.emptyForm.fields,extra:{},errors:{},isNew:!0,hasChanged:!0,isEditing:!0,position:this.props.forms.length+1,id:O}}),this.props.store.dispatch({type:"MOVE_FORM",formId:O,position:S})};o=this.initGaps(o,s,u);let _=null;return this.props.canEdit&&(_=jsx("button",{className:"condensed-inline-panel__top-add-button button bicolor icon icon-plus",type:"button",onClick:O=>(u(1),O.preventDefault(),!1),children:this.props.panelLabel})),jsxs("div",{children:[_,o]})}}function DNDCardSet(i){return jsx(DndProvider,{backend:TouchBackend,children:jsx(CardSet,K({},i))})}var condensedinlinepanel="";function renderCardHeaderDefault(i){return{__html:""}}function init(i,o={}){const a=o.canEdit||!0,s=o.canDelete||a,u=o.canOrder||!1,_=o.renderCardHeader||renderCardHeaderDefault,S=o.panelLabel||"Add";let O=document.getElementById(i);if(O===null){console.error(`CondensedInlinePanel.init(): Element with id '${i}' does not exist.`);return}let D=document.getElementById(i+"-TOTAL_FORMS"),T=O.getElementsByClassName("condensed-inline-panel__data")[0];O.getElementsByClassName("condensed-inline-panel__sort-order")[0];let E=O.getElementsByClassName("condensed-inline-panel__ui-container")[0],P=createStore(reducer),R=(M,$)=>M.position>$.position?1:M.position<$.position?-1:0;if(P.subscribe(()=>{if(O===null)return;let M=P.getState()||emptyState();ReactDOM__namespace.render(jsx(DNDCardSet,{forms:M.forms,panelLabel:S,renderCardHeader:_,canEdit:a,canDelete:s,canOrder:u,store:P,emptyForm:M.emptyForm,formTemplate:O.dataset.formTemplate||"",formsetPrefix:i,sortCompareFunc:R}),E)}),u){let M=O.getElementsByClassName("condensed-inline-panel__sort-order")[0];P.subscribe(()=>{let $=P.getState()||emptyState(),j=[];for(let H=0;H<$.forms.length;H++)j.push($.forms[H].position);M instanceof HTMLInputElement&&(M.value=JSON.stringify(j))})}let N=O.getElementsByClassName("condensed-inline-panel__delete")[0];P.subscribe(()=>{let M=P.getState()||emptyState(),$=[];for(let j=0;j<M.forms.length;j++)M.forms[j].isDeleted&&$.push(M.forms[j].id);N instanceof HTMLInputElement&&(N.value=JSON.stringify($))}),T instanceof HTMLInputElement&&P.dispatch({type:"SET_STATE",state:JSON.parse(T.value)}),P.subscribe(()=>{let M=P.getState()||emptyState();D instanceof HTMLInputElement&&(D.value=M.forms.length.toString())})}return exports.Card=DraggableCard,exports.CardSet=DNDCardSet,exports.init=init,exports.reducer=reducer,Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}}),exports}({},ReactDOM,React);
